!function(e){e.fn.chosenOrder=function(){var n,i=this.filter(".chosen-sortable[multiple]").first(),t=i.siblings(".chosen-container"),o=[];return i.find("option").each(function(){!this.selected&&o.push(this)}),n=e(t.find('.chosen-choices li[class!="search-field"]').map(function(){if(this){var n=e.trim(e(this).text());return i.find("option").filter(function(){return e(this).html()==n})[0]}})),n.push.apply(n,o),n},e.fn.chosenSortable=function(){var n=this.filter(".chosen-sortable[multiple]");n.each(function(){var n=e(this),i=n.siblings(".chosen-container");i.find(".chosen-choices").bind("mousedown",function(n){e(n.target).is("span")&&n.stopPropagation()}),i.find(".chosen-choices").sortable({placeholder:"ui-state-highlight",items:"li:not(.search-field)",tolerance:"pointer"}),n.closest("form").on("submit",function(){var e=n.chosenOrder();n.children().remove(),n.append(e),n.trigger("chosen:updated")})})}}(jQuery);
